"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7955],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),u=p(n),c=i,f=u["".concat(s,".").concat(c)]||u[c]||m[c]||r;return n?a.createElement(f,l(l({ref:t},d),{},{components:n})):a.createElement(f,l({ref:t},d))}));function c(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var p=2;p<r;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8191:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var a=n(7462),i=(n(7294),n(3905));const r={sidebar_position:3},l="Experiment files",o={unversionedId:"user_guide/fitting/experiment_files",id:"user_guide/fitting/experiment_files",title:"Experiment files",description:"Description",source:"@site/docs/user_guide/fitting/experiment_files.md",sourceDirName:"user_guide/fitting",slug:"/user_guide/fitting/experiment_files",permalink:"/chemex/docs/user_guide/fitting/experiment_files",draft:!1,editUrl:"https://github.com/gbouvignies/chemex/tree/master/docs/user_guide/fitting/experiment_files.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Starting a fit",permalink:"/chemex/docs/user_guide/fitting/chemex_fit"},next:{title:"Data files",permalink:"/chemex/docs/user_guide/fitting/data_files"}},s={},p=[{value:"Description",id:"description",level:2},{value:"Example",id:"example",level:2},{value:"Sections",id:"sections",level:2},{value:"<code>[experiment]</code>",id:"experiment",level:3},{value:"<code>[conditions]</code>",id:"conditions",level:3},{value:"<code>label</code>",id:"label",level:4},{value:"<code>[data]</code>",id:"data",level:3},{value:"<code>error</code>",id:"error",level:4},{value:"<code>filter_offsets</code>",id:"filter_offsets",level:4},{value:"<code>[data.profiles]</code>",id:"dataprofiles",level:4}],d={toc:p};function m(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"experiment-files"},"Experiment files"),(0,i.kt)("h2",{id:"description"},"Description"),(0,i.kt)("p",null,"The experiment files containing the experimental details about the datasets to\nbe fitted as well as the location of the files of the profiles. These files are\nprovided to ChemEx using the ",(0,i.kt)("inlineCode",{parentName:"p"},"-e")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"--experiments")," option."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"chemex fit -e <experiment_file1> <experiment_file2> [...]\n")),(0,i.kt)("p",null,"Experiment files are divided in 3 different sections:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"[experiment]")," includes the information about the experiment."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"[conditions]")," provides the sample conditions."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"[data]")," contains the details about the data location, spin system assignment\nas well as methods to estimate uncertainties or filter out some measurements.")),(0,i.kt)("h2",{id:"example"},"Example"),(0,i.kt)("p",null,"Here is an example experiment file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-toml",metastring:'title="experiment.toml"',title:'"experiment.toml"'},'[experiment]\nname         = "cest_15n"\ntime_t1      = 0.5\ncarrier      = 118.987\nb1_frq       = 26.3\n\n[conditions]\nh_larmor_frq = 499.243\n# p_total     = 2.0e-3\n# sample      = "A39G FF domain"\n# temperature = 1.0\n\n[data]\npath           = "../Data/26Hz/"\nerror          = "scatter"\nfilter_offsets = [[0.0, 26.0]]\n\n  [data.profiles]\n  13N = "13N-HN.out"\n  26N = "26N-HN.out"\n  28N = "28N-HN.out"\n  29N = "29N-HN.out"\n')),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"The list of available key-value pairs depends on each experiment. For each\nexperiment available in ChemEx, a sample configuration file is provided in the\nsection ",(0,i.kt)("a",{parentName:"p",href:"/docs/experiments"},"Experiments"),". Detailed descriptions about the\nmeaning of each key are included as comments in sample config files.")),(0,i.kt)("h2",{id:"sections"},"Sections"),(0,i.kt)("h3",{id:"experiment"},(0,i.kt)("inlineCode",{parentName:"h3"},"[experiment]")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"[experiment]")," section contains the details about the pulse sequence type\nand settings. Below are some of the keys that are commonly found in the\n",(0,i.kt)("inlineCode",{parentName:"p"},"[experiment]")," section:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"name")),(0,i.kt)("td",{parentName:"tr",align:null},"Pulse sequence name.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"carrier")),(0,i.kt)("td",{parentName:"tr",align:null},"Position of the carrier during the experiment, in ppm.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"time_t2"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"time_t1")),(0,i.kt)("td",{parentName:"tr",align:null},"Transverse and longitudinal relaxation delay in second (e.g. CPMG relaxation dispersion experiments).")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"pw90")),(0,i.kt)("td",{parentName:"tr",align:null},"90 degree pulse width, in second.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"b1_frq")),(0,i.kt)("td",{parentName:"tr",align:null},"B1 radio-frequency field strength, in Hz.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"observed_state")),(0,i.kt)("td",{parentName:"tr",align:null},"The ID of the state that is observed (one of ",(0,i.kt)("inlineCode",{parentName:"td"},"a"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"b"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"c")," or ",(0,i.kt)("inlineCode",{parentName:"td"},"d"),").")))),(0,i.kt)("h3",{id:"conditions"},(0,i.kt)("inlineCode",{parentName:"h3"},"[conditions]")),(0,i.kt)("p",null,"The section ",(0,i.kt)("inlineCode",{parentName:"p"},"[conditions]")," provides information about the experimental and\nsample conditions (Larmor frequency, sample temperature, protein concentration\nand labeling):"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"h_larmor_frq")),(0,i.kt)("td",{parentName:"tr",align:null},"Larmor frequency, in MHz.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"temperature")),(0,i.kt)("td",{parentName:"tr",align:null},"Sample temperature, in \xb0C (optional, required by some the kinetic models).")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"p_total"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"l_total")),(0,i.kt)("td",{parentName:"tr",align:null},"Protein and ligand concentration, respectively, in M (optional, required by some the kinetic models).")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"label")),(0,i.kt)("td",{parentName:"tr",align:null},"Labeling scheme of the sample.")))),(0,i.kt)("p",null,"While you should always provide the Larmor frequency (",(0,i.kt)("inlineCode",{parentName:"p"},"h_larmor_frq"),"), the\n",(0,i.kt)("inlineCode",{parentName:"p"},"temperature"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"p_total")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"l_total")," keys are only required depending on which\n",(0,i.kt)("a",{parentName:"p",href:"/chemex/docs/user_guide/fitting/kinetic_models"},"kinetic model")," is employed."),(0,i.kt)("h4",{id:"label"},(0,i.kt)("inlineCode",{parentName:"h4"},"label")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"label")," key is a list providing information about the labeling scheme of the\nsample. The labeling information is used in some experiments to take into\naccount some isotopic effects that may affect relaxation rates or the presence\nof scalar couplings."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Use ",(0,i.kt)("inlineCode",{parentName:"li"},'"2H"')," for deuterated samples to obtain accurate initial estimates of\nrelaxation rates based on model-free parameters."),(0,i.kt)("li",{parentName:"ul"},"Use ",(0,i.kt)("inlineCode",{parentName:"li"},'"13C"')," for uniformly ",(0,i.kt)("sup",null,"13"),"C-labeled samples to account for scalar\ncouplings in CEST experiments properly.")),(0,i.kt)("p",null,"For example, for a uniformly ",(0,i.kt)("sup",null,"13"),"C-labeled, perdeuterated sample, use\nthe following configuration:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-toml"},'label = ["13C", "2H"]\n')),(0,i.kt)("h3",{id:"data"},(0,i.kt)("inlineCode",{parentName:"h3"},"[data]")),(0,i.kt)("p",null,"The section ",(0,i.kt)("inlineCode",{parentName:"p"},"[data]")," contains the details about the data location, the\nspin-system assignments, and methods to estimate uncertainties and/or filter out\nsome data points."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"path")),(0,i.kt)("td",{parentName:"tr",align:null},"Path to the directory containing the data files.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"error")),(0,i.kt)("td",{parentName:"tr",align:null},"The method for error estimation.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"filter_offsets")),(0,i.kt)("td",{parentName:"tr",align:null},"The list of offsets to exclude from the calculation (in CEST experiments).")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"filter_planes")),(0,i.kt)("td",{parentName:"tr",align:null},"The list of planes from which data points should be excluded from the calculation (in CEST and CPMG experiments).")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"[data.profiles]")),(0,i.kt)("td",{parentName:"tr",align:null},"The subsection containing the list of the experimental profile file names are given along with their spin-system assignment")))),(0,i.kt)("h4",{id:"error"},(0,i.kt)("inlineCode",{parentName:"h4"},"error")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"error")," key is a string providing the method for error estimation."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Key value"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},'"file"')),(0,i.kt)("td",{parentName:"tr",align:null},"Uncertainty values directly taken from the file, no estimation are run.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},'"duplicates"')),(0,i.kt)("td",{parentName:"tr",align:null},"Estimate the uncertainty using the ",(0,i.kt)("a",{parentName:"td",href:"https://goldbook.iupac.org/html/P/P04758.html"},"pooled standard deviation"),". If no duplicates are found, the average of the experimental error values is returned.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},'"scatter"')),(0,i.kt)("td",{parentName:"tr",align:null},"Estimate the uncertainty from CEST profiles. Assume the profile has additive, Gaussian noise on top of a smoothly varying signal. Adapted from ",(0,i.kt)("a",{parentName:"td",href:"https://fr.mathworks.com/matlabcentral/fileexchange/16683-estimatenoise"},"there"),".")))),(0,i.kt)("h4",{id:"filter_offsets"},(0,i.kt)("inlineCode",{parentName:"h4"},"filter_offsets")),(0,i.kt)("p",null,"This is to filter out certain offsets from the CEST profiles. This can be\nuseful, for example, when decoupling sideband artifacts are present in the\nprofiles, as their locations are in general predictable. The filter is applied\nto all the profiles of the experiments."),(0,i.kt)("p",null,"You should provide a list of pairs of values, where the first value of the pair\ncorresponds to the offset relative to the main resonance position (\u03bd) and the\nsecond value to the bandwidth around the offset (\u0394\u03bd) where points are excluded\nfrom the calculation (\u03bd \xb1 0.5 ","*"," \u0394\u03bd). All values should be given in Hz. This key\nis optional."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-toml"},"filter_offsets = [\n   [0.0, 20.0],\n   [-300.0, 20.0],\n   [+300.0, 20.0],\n ]\n")),(0,i.kt)("h4",{id:"dataprofiles"},(0,i.kt)("inlineCode",{parentName:"h4"},"[data.profiles]")),(0,i.kt)("p",null,"This subsection of the ",(0,i.kt)("inlineCode",{parentName:"p"},"[data]")," section contains the list of the filenames of\nthe experimental profiles and their spin-system assignments."),(0,i.kt)("p",null,"The name of the spin-systems follows the Sparky-NMR peak label conventions. Each\nnucleus is designated by a ",(0,i.kt)("strong",{parentName:"p"},"group name"),", usually a 1- or 3-letter amino acid\nwith the position number in the protein sequence (e.g. ALA3 or A3), followed by\nan ",(0,i.kt)("strong",{parentName:"p"},"atom name")," (e.g. N, CA, CG1, etc.)."),(0,i.kt)("p",null,'For spin systems with more than one spin, use the "-" sign to separate the\ndifferent spin names. If successive spins of the system belong to the same\nresidue, the group ID (e.g. A12) can be omitted after the first spin. For\nexample, G23N-G23H and G23N-H are both valid and equivalent.'),(0,i.kt)("p",null,"Here is an example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-toml"},'  [data.profiles]\n  13N = "13N-HN.out"\n  26N = "26N-HN.out"\n  28N = "28N-HN.out"\n  29N = "29N-HN.out"\n')),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},'Choose the name of the spin-systems to reflect the spin-system of interest in\neach experiment. For example, "G2N" is suitable for experiments based on a\nsingle-spin system, whereas "G2N-H" is suitable for experiments based on a\ntwo-spin system, etc. Although ChemEx has a built-in mechanism to correct\nuser-supplied spin system names automatically, we recommend that you be as\naccurate as possible when choosing them.')))}m.isMDXComponent=!0}}]);